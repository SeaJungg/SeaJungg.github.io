---
layout: post
title: "lambda로 postgresql에 CRUD기능 추가하기"
category: inProgress
---

현상 파악
-
- 고객의 질문과 GPT의 답변으로 이뤄진 상담 내역을 저장할 DB와, 그 데이터를 그저 잘 검색해서 꺼내기만 하면 되는 간단한 CRUD 서버가 필요하다.
- CRUD에 붙어야 하는 비즈니스 로직이 전혀 없기 때문에 AWS Lambda와 API gateway를 이용해 서버리스 서비스를 구현하기로 마음을 먹었다.
     
문제 상황
- DB connection pool관리를 하지 않으면 나중에 가서 크게 데인다.
    - 커넥션이 몰리면 반드시 장애가 발생한다.
- 이를 방지하려면 소스단에서의 최적화도 필요하지만 인프라단에서의 예방조치나 기능제공도 필요하다.
    - 소스단에서는 편하게 connect, close를 하면서 지연시간이 적어야 한다.
    - 인프라단에서는 Connection개수나 timeout을 잘 관리함으로써 세션과 데이터를 안정적으로 제공해야 한다.
- 그러자니 pool 관리 걱정을 덜 수 있는 AWS 제품을 추가로 써야하는데 이것도 또 비용이다.
    
고민 포인트
- 이 DB가 그렇게 많이 접근당할까?
