---
layout: post
title: "Node JS 환경에서의 API 테스트 코드 작성 방법"
category: inProgress
---

### 현상 파악

> api 테스트의 시간적 비용이 너무 크다.
- api의 기본적인 I/O 맞추는 게 의외로 너무너무 오래 걸렸다.고작 오타 하나, NULL처리 미숙으로 인해, 열다섯 개쯤 되는 필수값을 프론트 화면에서 일일이 넣어서 한 번 더 post request를 날려야만 테스트가 된다.<br>(등록-수정-put요청-앗!-등록...)
- DB데이터 재정리 시간이 너무 길다. DB를 정리하느니 그냥 처음부터 하는 게 빠를 정도(너무나도 귀찮아진다.) DB에 의존하는 CRUD api인데 자동 롤백 기능을 만들지 않았었다.

### 개선 목표
- 프론트 화면 없이도, Test-case가 알아보기 쉽게 정리될 수 있는 테스트 환경 만들기.
- 기본적인 예외field 때문에 소요되는 프론트엔드 팀과의 커뮤니케이션 시간 단축하기.(NULL, 공백, default값과 같이.. 돌발적이지만 식상한 것들.)
- api를 3개 이상 만들어야 하는 프로젝트에서, 각 api간 독립성이 보장된 테스트 환경 만들기.

### 해결 방안
- Mocha test : Node.js 의 함수 테스트 프레임워크. 인턴 후배님이 사용하셔서 알게 됨. 
- super test : Mocha 위에서 돌아가는, API 단위의 테스트. 익스프레스 서버를 구동시켜서 실제 요청 후 결과를 검증한다. 역시 내가 뭔가 필요하다 싶으면 이미 세상에 있다. 무작정 request 보내고 response를 log에서 찾던 나의 시간들 안녕..





